{
    "debug": false,

    "globals": {
    },

    "parameters": [
        { "name": "redis", "host": "localhost" }
    ],

    "template": {
        "input": {
            "$type": "Ruley.Core.Inputs.PollingInput, Ruley",
            "interval": 5000
        },

        "filters": [
            {
                "$type": "@redis.ping",
                "connectionString": "localhost"
            },
            {
                "$type": "@map",
                "field": "exception",
                "destination": "status",
                "mapping": [
                    [ null, "Healthy" ]
                ],
                "default": "Unhealthy"
            },
            {
                "$type": "@addfield",
                "value": "{exception}",
                "destination": "info"
            },
            {
                "$type": "@distinctvalue",
                "field": "status"
            },
            {
                "$type": "@bus.pub",
                "key": "health-check"
            }
        ],

        "outputs": [
            {
                "$type": "@console",
                "enabled": true
            }
        ]
    }
}
