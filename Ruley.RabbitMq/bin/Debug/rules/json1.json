{
    "name": "test rule",
    "debug": false,

    "input": {
        "$type": "Ruley.Core.Inputs.HttpPollerInput, Ruley",
        "url": "http://localhost:15672/api/aliveness-test/test",
        "username": "guest",
        "password": "guest",
        "authentication": "basic",
        "interval": 3000
    },

    "filters": [
        {
            "$type": "@map",
            "field": "StatusCode",
            "destination": "unneeded",
            "mapping": [
                [ 200, { "Status": "Healthy", "Critical": false } ]
            ],
            "default": { "Status": "Unhealthy", "Critical": true }
        },
        {
            "$type": "@distinctvalue",
            "field": "StatusCode"
        },
        {
            "$type": "@skip",
            "count": 1
        },
      //  {
       //     "$type": "@replace",
        //    "map": [
         //       [ "ServiceType", "RabbitMq" ],
          //      [ "StatusText", "{Status}" ],
          //      [ "Critical", true ]
          //  ]
       // }
    ],

    "outputs": [
        {
            "$type": "@console",
            "enabled": true,
            "message": "RabbitMq is now {Status}"
        }
    ]
}
