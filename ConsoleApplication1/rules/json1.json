{
    "properties": {
        "Host": "localhost",
        "Port": 15672,
        "VHost": "events",
        "ServiceType": "rabbitmq"
    },

    "input": {
        "$type": "Ruley.Core.Inputs.HttpPollerInput, Ruley",
        "url": "http://{Properties.Host}:{Properties.Port}/api/aliveness-test/{Properties.VHost}",
        "username": "guest",
        "password": "guest",
        "authentication": "basic",
        "interval": 3000
    },

    "filters": [
        {
            "$type": "@map",
            "field": "StatusCode",
            "destination": "Status",
            "mapping": [
                [ 200, "Healthy" ]
            ],
            "default": "Unhealthy"
        },
        {
            "$type": "@distinctvalue",
            "field": "Status"
        },
        {
            "$type": "@addfield",
            "destination": "ServiceType",
            "value": "{Properties.ServiceType}"
        }
        //  {
        //     "$type": "@skip",
        //    "count": 1
        // }
    ],

    "outputs": [
        {
            "$type": "@console",
            "enabled": true,
            // "message": "RabbitMq is now {Status}"
        }
    ]
}
