{
    "debug": false,

    "globals": {
    },

    "parameters": [
        {
        }
    ],

    "template": {
        "input": {
            "$type": "@bus.in",
            "key": "health-check"
        },

        "filters": [
            {
                "$type": "@map",
                "value": "[status]",
                "map": [
                    { "key": "Healthy", "value": { "emoji": ":ok:", "info": null, "sendSlack": false } }
                ],
                "default": { "emoji": ":ok:", "info": null, "sendSlack": true }
            },
            {
                "$type": "@if",
                "field": "sendSlack",
                "then": {
                    "$type": "@slack",
                    "webHookUrl": "@slack_url",
                    "username": "health-bot",
                    "emoji": "{emoji}",
                    "message": "*{name}* on {host} is *{status}*{infoMessage}"
                },
                "else": {
                    "$type": "@consolef",
                    "enabled": true
                }
            }
        ],

        "outputs": [
            {
                "$type": "@console",
                "enabled": false
            }
        ]
    }
}
